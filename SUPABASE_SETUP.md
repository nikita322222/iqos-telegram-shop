# Настройка Supabase для загрузки изображений

## Зачем Supabase?

Supabase - это бесплатная платформа с Storage для файлов. Идеально подходит для хранения изображений товаров.

**Преимущества:**
- ✅ Работает везде (включая Беларусь)
- ✅ Бесплатно до 1GB
- ✅ Быстрый CDN
- ✅ Простая настройка

## Пошаговая инструкция

### Шаг 1: Регистрация на Supabase

1. Откройте https://supabase.com
2. Нажмите **"Start your project"**
3. Зарегистрируйтесь через GitHub или email
4. Подтвердите email если нужно

### Шаг 2: Создание проекта

1. После входа нажмите **"New project"**
2. Заполните:
   - **Name:** `iqos-shop` (или любое название)
   - **Database Password:** придумайте пароль (сохраните его!)
   - **Region:** выберите ближайший регион (например, Frankfurt)
   - **Pricing Plan:** оставьте **Free**
3. Нажмите **"Create new project"**
4. Подождите 1-2 минуты пока проект создается

### Шаг 3: Создание Storage Bucket

1. В левом меню выберите **"Storage"** (иконка папки)
2. Нажмите **"Create a new bucket"**
3. Заполните:
   - **Name:** `products`
   - **Public bucket:** включите переключатель (должен быть зеленым)
   - **File size limit:** оставьте по умолчанию
4. Нажмите **"Create bucket"**

### Шаг 4: Получение API ключей

1. В левом меню выберите **"Settings"** (иконка шестеренки внизу)
2. Выберите **"API"**
3. Найдите секцию **"Project API keys"**
4. Скопируйте:
   - **Project URL** (например: `https://abcdefgh.supabase.co`)
   - **anon public** ключ (длинная строка, начинается с `eyJ...`)

### Шаг 5: Добавление переменных на Render

1. Откройте https://dashboard.render.com
2. Найдите ваш сервис **"iqos-backend"**
3. Нажмите на него
4. Слева выберите **"Environment"**
5. Нажмите **"Add Environment Variable"** два раза и добавьте:

**Первая переменная:**
- **Key:** `SUPABASE_URL`
- **Value:** ваш Project URL (например: `https://abcdefgh.supabase.co`)

**Вторая переменная:**
- **Key:** `SUPABASE_KEY`
- **Value:** ваш anon public ключ (длинная строка)

6. Нажмите **"Save Changes"**
7. Render автоматически перезапустит сервис (подождите 2-3 минуты)

### Шаг 6: Проверка работы

1. Откройте админ панель через бота (`/admin`)
2. Перейдите в **"Товары"**
3. Нажмите **"Добавить товар"**
4. Попробуйте загрузить изображение
5. Если все настроено правильно, изображение загрузится в Supabase

### Проверка загруженных файлов

Чтобы посмотреть загруженные изображения:
1. Откройте Supabase Dashboard
2. Перейдите в **Storage** → **products**
3. Вы увидите все загруженные изображения

## Альтернатива (если не хотите настраивать)

Можете просто использовать прямые URL изображений:
1. Загрузите изображение на любой хостинг (Imgur, Postimages, Google Drive)
2. Скопируйте прямую ссылку
3. Вставьте в поле "URL изображения" при создании товара

## Лимиты бесплатного тарифа Supabase

- 1GB хранилища
- 2GB трафика в месяц
- Для вашего магазина этого более чем достаточно!

## Что дальше?

После настройки Supabase:
- ✅ Загрузка изображений будет работать автоматически
- ✅ Изображения будут храниться постоянно
- ✅ Быстрая загрузка через CDN
- ✅ Можно загружать изображения прямо из админ панели
