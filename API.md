# üì° API Documentation

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API (–∫—Ä–æ–º–µ `/api/users/check/{telegram_id}`) —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:

```
Authorization: tma {telegram_init_data}
```

–≥–¥–µ `telegram_init_data` - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ initData –∏–∑ Telegram Web App SDK.

## Endpoints

### Users

#### `GET /api/users/check/{telegram_id}`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–æ—Ç–æ–º)

**Response:**
```json
{
  "has_access": true
}
```

#### `GET /api/users/me`
–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**Response:**
```json
{
  "id": 1,
  "telegram_id": 123456789,
  "username": "user",
  "first_name": "–ò–º—è",
  "last_name": "–§–∞–º–∏–ª–∏—è",
  "is_active": true,
  "created_at": "2024-01-01T00:00:00"
}
```

### Products

#### `GET /api/products`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤

**Query Parameters:**
- `skip` (int, optional): –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å N —Ç–æ–≤–∞—Ä–æ–≤
- `limit` (int, optional): –õ–∏–º–∏—Ç —Ç–æ–≤–∞—Ä–æ–≤ (default: 100)
- `category` (string, optional): –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**Response:**
```json
[
  {
    "id": 1,
    "name": "IQOS ILUMA PRIME",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞",
    "price": 12990,
    "image_url": "https://...",
    "category": "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞",
    "badge": "–•–ò–¢",
    "is_active": true,
    "stock": 10,
    "created_at": "2024-01-01T00:00:00"
  }
]
```

#### `GET /api/products/{product_id}`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ ID

**Response:** –û–±—ä–µ–∫—Ç —Ç–æ–≤–∞—Ä–∞ (—Å–º. –≤—ã—à–µ)

### Orders

#### `POST /api/orders`
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

**Request Body:**
```json
{
  "items": [
    {
      "product_id": 1,
      "quantity": 2
    }
  ],
  "phone": "+375291234567",
  "delivery_address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 1",
  "comment": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É"
}
```

**Response:**
```json
{
  "id": 1,
  "user_id": 1,
  "total_amount": 25980,
  "status": "pending",
  "delivery_address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 1",
  "phone": "+375291234567",
  "comment": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É",
  "created_at": "2024-01-01T00:00:00",
  "items": [
    {
      "id": 1,
      "product_id": 1,
      "quantity": 2,
      "price": 12990,
      "product": { /* –æ–±—ä–µ–∫—Ç —Ç–æ–≤–∞—Ä–∞ */ }
    }
  ]
}
```

#### `GET /api/orders`
–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Response:** –ú–∞—Å—Å–∏–≤ –∑–∞–∫–∞–∑–æ–≤ (—Å–º. –≤—ã—à–µ)

### Favorites

#### `GET /api/favorites`
–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

**Response:**
```json
[
  {
    "id": 1,
    "user_id": 1,
    "product_id": 1,
    "created_at": "2024-01-01T00:00:00",
    "product": { /* –æ–±—ä–µ–∫—Ç —Ç–æ–≤–∞—Ä–∞ */ }
  }
]
```

#### `POST /api/favorites`
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

**Request Body:**
```json
{
  "product_id": 1
}
```

**Response:**
```json
{
  "message": "–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"
}
```

#### `DELETE /api/favorites/{product_id}`
–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

**Response:**
```json
{
  "message": "–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ"
}
```

## –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤

- `pending` - –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- `confirmed` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
- `completed` - –î–æ—Å—Ç–∞–≤–ª–µ–Ω
- `cancelled` - –û—Ç–º–µ–Ω–µ–Ω

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `401` - –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (–Ω–µ–≤–µ—Ä–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–∫–µ–Ω)
- `404` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ)
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
